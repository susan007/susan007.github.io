(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{287:function(t,e,s){"use strict";s.r(e);var a=s(0),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[s("p",[t._v("Object.keys()引发的血案")]),t._v(" "),t._m(0),t._v(" "),s("p",[t._v("接到一个需求，根据后端返回的一个对象类型的数据(非常庞大，成百上千条数据)，按照标签指定的顺序，去显示和对象属性相应的标签及对应值，数据形式如下。")]),t._v(" "),s("p",[t._v("后端返回的的数据")]),t._v(" "),t._m(1),s("p",[t._v("对应的标签（放在本地的资源文件）")]),t._v(" "),t._m(2),s("p",[t._v("产出的结果")]),t._v(" "),t._m(3),t._m(4),t._v(" "),s("p",[t._v("机智的我看了看数据，一拍脑门，这不简单吗，直接去遍历资源文件tags对象的属性不就可以了，so easy~")]),t._v(" "),s("p",[t._v("实现一：")]),t._v(" "),t._m(5),s("p",[t._v("获取tag和对应的值")]),t._v(" "),t._m(6),s("p",[t._v("实现二")]),t._v(" "),t._m(7),s("p",[t._v("就在我美滋滋的时候，测试反馈显示的顺序不是指定顺序。仔细看了看发现属性竟然是按照从小到大的顺序排列的，是的，属性被排序了，而且是按照从小到大。")]),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),s("p",[t._v("经过查阅资料，发现Object.keys(obj)以数组形式，返回对象所有可枚举属性。顺序遵循for...in遍历对象返回的顺序，再看for...in。")]),t._v(" "),s("h3",{attrs:{id:"for-in"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#for-in"}},[t._v("#")]),t._v(" "),s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...in",target:"_blank",rel:"noopener noreferrer"}},[t._v("for...in"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("以任意顺序返回对象的可枚举属性。为什么是任意顺序？其顺序依赖于浏览器实现。")]),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),s("p",[t._v("这解释了为什么我遍历出来的顺序总是从小到大排列的。参考"),s("a",{attrs:{href:"https://tc39.es/ecma262/#sec-fundamental-objects",target:"_blank",rel:"noopener noreferrer"}},[t._v("EcmaScript规范"),s("OutboundLink")],1)]),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),s("p",[t._v("然后给出了"),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/delete",target:"_blank",rel:"noopener noreferrer"}},[t._v("建议"),s("OutboundLink")],1)]),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),s("p",[s("a",{attrs:{href:"https://tc39.es/ecma262/#sec-fundamental-objects",target:"_blank",rel:"noopener noreferrer"}},[t._v("ECMAScript规范"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/40601459",target:"_blank",rel:"noopener noreferrer"}},[t._v("5分钟彻底理解Object.keys"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://juejin.im/post/5c88ce0e5188257f882f0ef8",target:"_blank",rel:"noopener noreferrer"}},[t._v("Object.keys(..)对象属性的顺序？"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/keys",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN文档"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.jstips.co/zh_cn/javascript/map-to-the-rescue-adding-order-to-object-properties/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Map()的营救"),s("OutboundLink")],1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"背景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[this._v("#")]),this._v(" 背景")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Apple'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("101")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'5SE'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("102")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'16G'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tags "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("101")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'型号'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'厂商'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("102")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'内存'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[this._v("型号："),e("span",{pre:!0,attrs:{class:"token number"}},[this._v("5")]),this._v("SE\n厂商：Apple\n内存："),e("span",{pre:!0,attrs:{class:"token number"}},[this._v("16")]),this._v("G\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"尝试object-keys"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#尝试object-keys"}},[this._v("#")]),this._v(" 尝试Object.keys()")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" tags "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/assets/tags'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取key")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" keys "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tags"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-for")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("(key, index) in keys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n{{tags[key]}}: {{data[key]}}\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-for")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("(val, key, index) in tags"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n{{val}}: {{data[key]}}\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"探索object-keys-object-getownpropertynames-reflect-ownkeys"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#探索object-keys-object-getownpropertynames-reflect-ownkeys"}},[this._v("#")]),this._v(" 探索Object.keys()/Object.getOwnPropertyNames()/Reflect.ownKeys()")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"object-keys"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#object-keys"}},[this._v("#")]),this._v(" Object.keys()")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("...Because the order of iteration is implementation-dependent, iterating over an array may not visit elements in a consistent order.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"for-in遍历对象属性顺序"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#for-in遍历对象属性顺序"}},[this._v("#")]),this._v(" for...in遍历对象属性顺序")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("如果属性名的类型是Number，那么Object.keys返回值是按照key从小到大排序")]),this._v(" "),e("li",[this._v("如果属性名的类型是String，那么Object.keys返回值是按照属性被创建的时间升序排序")]),this._v(" "),e("li",[this._v("如果属性名的类型是Symbol，那么逻辑同String相同")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"其他方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#其他方法"}},[this._v("#")]),this._v(" 其他方法")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("有文章提到以下两个方法会保证对象属性的顺序，查询资料发现并不是如此，"),e("code",[this._v("Object.getOwnPropertyNames")]),this._v("和"),e("code",[this._v("Reflect.ownKeys")]),this._v("。但是查看文档提示如下：")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("code",[t._v("Object.getOwnPropertyNames")]),t._v("： 数组中枚举属性的顺序与通过 "),s("code",[t._v("for...in")]),t._v(" 循环（或 "),s("code",[t._v("Object.keys")]),t._v("）迭代该对象属性时一致。数组中不可枚举属性的顺序未定义。")]),t._v(" "),s("li",[s("code",[t._v("Reflect.ownKeys")]),t._v("：它的返回值等同于"),s("code",[t._v("Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))")]),t._v("。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"如何解决？"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何解决？"}},[this._v("#")]),this._v(" 如何解决？")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"方式一"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#方式一"}},[this._v("#")]),this._v(" 方式一")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("如果你想让对象的遍历顺序兼容所有的浏览器，那么你可以使用两个数组来模拟 (一个做为keys，一个做为 values)， 或者建立一个由单一属性的对象组成的数组等。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"方式二"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#方式二"}},[this._v("#")]),this._v(" 方式二")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("使用ES6的"),e("code",[this._v("Map()")]),this._v("类型代替，也是一种类似于对象的键值对形式。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("不限键的类型。")]),this._v(" "),e("li",[this._v("Map()结构原生提供返回键名的遍历器"),e("code",[this._v("Map.prototype.keys()")]),this._v("，并且是按照插入时的顺序返回。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h6",{attrs:{id:"参考文章"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[this._v("#")]),this._v(" 参考文章")])}],!1,null,null,null);e.default=r.exports}}]);